import{createClient as u}from"https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";import{format as d}from"https://cdn.skypack.dev/date-fns";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();const a=u("https://sueahkavaigvtwqamnxm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1ZWFoa2F2YWlndnR3cWFtbnhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg4MDQ5NTYsImV4cCI6MjA2NDM4MDk1Nn0.6zkizLKYR_58MtXeMiILpAAEDWm2KkkIAnyuPsqcIws");let l="created_at.desc";async function c(){const{data:n,error:t}=await a.from("article").select("*").order(...l.split("."));if(t){console.error(t);return}const s=document.getElementById("article-list");s.innerHTML="",n.forEach(r=>{const e=document.createElement("div");e.innerHTML=`
      <h3>${r.title}</h3>
      <h4>${r.subtitle}</h4>
      <p><strong>${r.author}</strong> | ${d(new Date(r.created_at),"dd-MM-yyyy")}</p>
      <p>${r.content}</p>
      <hr />
    `,s.appendChild(e)})}c();document.getElementById("sort-select").addEventListener("change",n=>{l=n.target.value,c()});document.getElementById("article-form").addEventListener("submit",async n=>{n.preventDefault();const t=n.target,s={title:t.title.value,subtitle:t.subtitle.value,author:t.author.value,content:t.content.value,created_at:t.created_at.value||new Date().toISOString()},{error:r}=await a.from("article").insert([s]);r?(alert("Błąd!"),console.error("Błąd Supabase:",r.message,r.details)):(alert("Dodano!"),t.reset(),c())});
